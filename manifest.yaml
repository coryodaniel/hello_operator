---
{
  "spec": {
    "version": "v1",
    "scope": "Namespaced",
    "names": {
      "singular": "greeting",
      "short_names": null,
      "plural": "greetings",
      "kind": "Greeting"
    },
    "group": "hello-operator.bonny.test"
  },
  "metadata": {
    "name": "greetings.hello-operator.bonny.test",
    "labels": {
      "test-app": "hello-operator",
      "k8s-app": "hello-operator"
    }
  },
  "kind": "CustomResourceDefinition",
  "apiVersion": "apiextensions.k8s.io/v1beta1"
}
---
{
  "rules": [
    {
      "verbs": [
        "*"
      ],
      "resources": [
        "customresourcedefinitions"
      ],
      "apiGroups": [
        "apiextensions.k8s.io"
      ]
    },
    {
      "verbs": [
        "*"
      ],
      "resources": [
        "greetings"
      ],
      "apiGroups": [
        "hello-operator.bonny.test"
      ]
    },
    {
      "verbs": [
        "*"
      ],
      "resources": [
        "deployments"
      ],
      "apiGroups": [
        "apps"
      ]
    },
    {
      "verbs": [
        "*"
      ],
      "resources": [
        "services"
      ],
      "apiGroups": [
        ""
      ]
    }
  ],
  "metadata": {
    "name": "hello-operator",
    "labels": {
      "test-app": "hello-operator",
      "k8s-app": "hello-operator"
    }
  },
  "kind": "ClusterRole",
  "apiVersion": "rbac.authorization.k8s.io/v1"
}
---
{
  "metadata": {
    "namespace": "default",
    "name": "hello-operator",
    "labels": {
      "test-app": "hello-operator",
      "k8s-app": "hello-operator"
    }
  },
  "kind": "ServiceAccount",
  "apiVersion": "v1"
}
---
{
  "subjects": [
    {
      "namespace": "default",
      "name": "hello-operator",
      "kind": "ServiceAccount"
    }
  ],
  "roleRef": {
    "name": "hello-operator",
    "kind": "ClusterRole",
    "apiGroup": "rbac.authorization.k8s.io"
  },
  "metadata": {
    "name": "hello-operator",
    "labels": {
      "test-app": "hello-operator",
      "k8s-app": "hello-operator"
    }
  },
  "kind": "ClusterRoleBinding",
  "apiVersion": "rbac.authorization.k8s.io/v1"
}
---
{
  "spec": {
    "template": {
      "spec": {
        "serviceAccountName": "hello-operator",
        "securityContext": {
          "runAsUser": 65534,
          "runAsNonRoot": true
        },
        "containers": [
          {
            "securityContext": {
              "readOnlyRootFilesystem": true,
              "allowPrivilegeEscalation": false
            },
            "resources": {
              "requests": {
                "memory": "200Mi",
                "cpu": "200m"
              },
              "limits": {
                "memory": "200Mi",
                "cpu": "200m"
              }
            },
            "name": "hello-operator",
            "image": "quay.io/coryodaniel/hello_operator",
            "env": [
              {
                "value": "prod",
                "name": "MIX_ENV"
              },
              {
                "valueFrom": {
                  "fieldRef": {
                    "fieldPath": "metadata.name"
                  }
                },
                "name": "BONNY_POD_NAME"
              },
              {
                "valueFrom": {
                  "fieldRef": {
                    "fieldPath": "metadata.namespace"
                  }
                },
                "name": "BONNY_POD_NAMESPACE"
              },
              {
                "valueFrom": {
                  "fieldRef": {
                    "fieldPath": "status.podIP"
                  }
                },
                "name": "BONNY_POD_IP"
              },
              {
                "valueFrom": {
                  "fieldRef": {
                    "fieldPath": "spec.serviceAccountName"
                  }
                },
                "name": "BONNY_POD_SERVICE_ACCOUNT"
              }
            ]
          }
        ]
      },
      "metadata": {
        "labels": {
          "test-app": "hello-operator",
          "k8s-app": "hello-operator"
        }
      }
    },
    "selector": {
      "matchLabels": {
        "test-app": "hello-operator",
        "k8s-app": "hello-operator"
      }
    },
    "replicas": 1
  },
  "metadata": {
    "namespace": "default",
    "name": "hello-operator",
    "labels": {
      "test-app": "hello-operator",
      "k8s-app": "hello-operator"
    }
  },
  "kind": "Deployment",
  "apiVersion": "apps/v1"
}
